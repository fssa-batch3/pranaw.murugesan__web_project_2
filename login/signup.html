<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  <link rel="stylesheet" href="../assets/css/login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

</head>

<body>
  <!-- header starting -->
  <header>

    <div>
      <h2>Scriptify</h2>
    </div>
    <nav>
      <a href="../index.html"><button>Home</button></a>
      <a href="#"><button>About</button></a>
    </nav>
    <img id="wave" src="../assets/img/wave-haikei.png" alt="">
  </header>
  <!-- header end -->

  <!-- Form starts here -->
  <form id="form">
    <div class="mb-3">
      <label for="fname" class="form-label">Enter Your First Name</label>
      <input type="text" class="form-control" id="fname" pattern="[a-zA-Z]+" required>
      <label for="lname" class="form-label">Enter Your Last Name</label>
      <input type="text" class="form-control" pattern="[a-zA-Z]+" id="lname" required>
      <label for="email" class="form-label">Email address</label>
      <input type="email" class="form-control" id="email" aria-describedby="emailHelp" required>
      <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">Password</label>
      <input type="password" class="form-control" id="password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" required>
      <label for="confirm_password" class="form-label">Confirm Password</label>
      <input type="password" class="form-control" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\s).*$" id="confirm_password" required>
    </div>
    <button id="signUp" class="btn btn-primary">Sign Up</button>
  </form>




  <script>
    document.getElementById("form").addEventListener("submit", (e) => {
      e.preventDefault();
      signup();
    })
    const signup = () => {
      // Initialising variables
      const fname = document.getElementById("fname").value;
      const lname = document.getElementById("lname").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      const confirm_password = document.getElementById("confirm_password").value;

      let arr;
      let userList = {
          "firstname": fname,
          "lastname": lname,
          "email": email,
          "password": password

        }
      let users = JSON.parse(localStorage.getItem("userData"));
      let res;

      if (users) {
        arr = JSON.parse(localStorage.getItem("userData"))
        users.find((e) => {

          if (e["email"] == email) {
            return res = 1;
          }
          else {
            return res = 0;
          }
        })

        if (res == 1) {
          // alert("Email already registered")
          swal("Sorry :(", "Account already exist!", "error");
        }
        else{
          arr.push(userList)
        localStorage.setItem("userData", JSON.stringify(arr))
        window.location.href = "./signin.html";
        }

      }
      else {
        arr = []
       
        arr.push(userList)

        localStorage.setItem("userData", JSON.stringify(arr))
        window.location.href = "./signin.html";
      }
    }

    // }

  </script>
</body>

</html>